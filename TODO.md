# Reddit Clone - TODO リスト

## 🎯 プロジェクト進捗状況

### ✅ 完了済み機能

#### バックエンド (Rust + axum)

- [x] axum フレームワークを使用した基本プロジェクト構造
- [x] sqlx を使用した PostgreSQL データベース統合
- [x] データベーススキーマとマイグレーション
- [x] argon2 パスワードハッシュ化による JWT 認証システム
- [x] ユーザー CRUD 操作（登録、ログイン、プロフィール更新）
- [x] ページネーション付きスレッド CRUD 操作
- [x] ツリー構造対応のコメント CRUD 操作
- [x] リフレッシュトークン機能
- [x] OpenAPI 仕様書生成
- [x] CORS 設定
- [x] 環境設定

#### フロントエンド (Next.js 15 + App Router)

- [x] shadcn/ui コンポーネントを使用したプロジェクトセットアップ
- [x] Orval API クライアント生成
- [x] 認証用 axios インターセプター付き API クライアント
- [x] フォームバリデーション付き登録ページ（react-hook-form + zod）
- [x] トースト通知（sonner）
- [x] データフェッチング用 React Query セットアップ
- [x] TypeScript 設定
- [x] **ログインページ** (`/login`) - メール/パスワードバリデーション付きログインフォーム
- [x] **認証状態管理** - AuthProvider、useAuth フック、ユーザー状態の永続化
- [x] **ログアウト機能** - ナビゲーションのログアウトボタン、ローカルストレージクリア
- [x] **ナビゲーションコンポーネント** - ユーザー認証状態表示、レスポンシブ対応
- [x] **保護されたルートコンポーネント** - 認証チェック機能
- [x] **自動トークンリフレッシュ** - 25 分間隔での自動更新

---

## 🚧 進行中 / 緊急タスク

### 高優先度

#### コアアプリケーション機能

- [ ] **スレッドリストページの改善** ⚠️ **進行中**

  - [x] useGetThreads フックとの統合開始
  - [ ] 型定義の修正（ThreadListResponse の正しいプロパティ名確認）
  - [ ] ページネーション実装完了
  - [ ] ローディング状態とエラーハンドリング完了
  - [ ] 検索機能

- [ ] **スレッド詳細ページ** (`/threads/[id]`)

  - [ ] スレッドコンテンツとメタデータ表示
  - [ ] コメントツリー表示
  - [ ] `useGetThread`と`useGetComments`との統合

- [ ] **コメントシステム**
  - [ ] コメント作成フォーム
  - [ ] 返信機能（ネストされたコメント）
  - [ ] コメントの編集と削除
  - [ ] リアルタイムコメント数更新

### 中優先度

#### ユーザーエクスペリエンス

- [ ] **ユーザープロフィールページ** (`/profile`)

  - [ ] ユーザー情報表示
  - [ ] プロフィール編集機能
  - [ ] ユーザーのスレッドとコメント履歴

- [ ] **スレッド作成/編集**
  - [ ] create-thread-form の実際の API 統合
  - [ ] 作成者用スレッド編集機能
  - [ ] リッチテキストエディター統合

#### バックエンド改善

- [ ] **認証ミドルウェアの再有効化**

  - [ ] axum 互換性問題の修正
  - [ ] 適切な JWT 検証の実装
  - [ ] ロールベースアクセス制御の追加

- [ ] **Google OAuth 統合**
  - [ ] OAuth フロー実装の完成
  - [ ] フロントエンド Google ログインボタン
  - [ ] アカウント連携機能

---

## 🔮 将来の拡張機能

### セキュリティ & パフォーマンス

- [ ] **レート制限**

  - [ ] API レート制限実装
  - [ ] ログイン試行制限
  - [ ] DDOS 保護

- [ ] **セキュリティ強化**

  - [ ] CSRF 保護
  - [ ] XSS 保護バリデーション
  - [ ] 入力サニタイゼーション
  - [ ] SQL インジェクション防止監査

- [ ] **パフォーマンス最適化**
  - [ ] データベースクエリ最適化
  - [ ] フロントエンドコード分割
  - [ ] 画像最適化
  - [ ] キャッシュ戦略

### 高度な機能

- [ ] **メールシステム**

  - [ ] 新規アカウントのメール認証
  - [ ] メールでのパスワードリセット
  - [ ] 返信の通知メール

- [ ] **投票/評価システム**

  - [ ] アップ投票/ダウン投票機能
  - [ ] コメントスコアリング
  - [ ] スレッド人気ランキング

- [ ] **検索機能**

  - [ ] スレッドの全文検索
  - [ ] 検索フィルター（日付、作成者など）
  - [ ] 検索結果のページネーション

- [ ] **ファイルアップロードシステム**

  - [ ] ユーザーアバターアップロード
  - [ ] スレッド画像添付
  - [ ] ファイルサイズと種類バリデーション

- [ ] **管理パネル**
  - [ ] ユーザー管理
  - [ ] コンテンツモデレーション
  - [ ] 分析ダッシュボード

### UX/UI 改善

- [ ] スレッドに OGP 画像の追加（動的に生成）
- [ ] axios から fetch への移行

- [ ] **レスポンシブデザイン**

  - [ ] モバイルファーストアプローチ
  - [ ] タブレット最適化
  - [ ] タッチフレンドリーなインタラクション

- [ ] **アクセシビリティ**

  - [ ] ARIA ラベルとロール
  - [ ] キーボードナビゲーション
  - [ ] スクリーンリーダー対応
  - [ ] カラーコントラスト準拠

- [ ] **テーマシステム**

  - [ ] ダーク/ライトモード切り替え
  - [ ] カスタムテーマ選択
  - [ ] ユーザー設定の永続化

- [ ] **Progressive Web App (PWA)**
  - [ ] サービスワーカー実装
  - [ ] オフライン機能
  - [ ] プッシュ通知

### エラーハンドリング & 監視

- [ ] **エラーページ**

  - [ ] カスタム 404 ページ
  - [ ] 500 エラーページ
  - [ ] ネットワークエラーハンドリング

- [ ] **ログと監視**
  - [ ] リクエスト/レスポンスログ
  - [ ] エラートラッキング統合
  - [ ] パフォーマンス監視
  - [ ] ヘルスチェックエンドポイント

---

## 🧪 テスト戦略

### フロントエンドテスト

- [ ] **ユニットテスト**

  - [ ] React Testing Library でのコンポーネントテスト
  - [ ] @testing-library/react-hooks でのフックテスト
  - [ ] ユーティリティ関数テスト

- [ ] **統合テスト**

  - [ ] API 統合テスト
  - [ ] フォーム送信フロー
  - [ ] 認証フロー

- [ ] **E2E テスト**
  - [ ] ユーザー登録とログインフロー
  - [ ] スレッド作成とコメント
  - [ ] クロスブラウザ互換性

### バックエンドテスト

- [ ] **ユニットテスト**

  - [ ] ハンドラー関数テスト
  - [ ] データベース操作テスト
  - [ ] 認証ロジックテスト

- [ ] **統合テスト**

  - [ ] API エンドポイントテスト
  - [ ] データベース統合テスト
  - [ ] JWT トークン検証テスト

- [ ] **負荷テスト**
  - [ ] API パフォーマンステスト
  - [ ] データベースクエリパフォーマンス
  - [ ] 同時ユーザーテスト

---

## 🚀 デプロイ & インフラ

### 開発環境

- [ ] **Docker 設定**
  - [ ] バックエンド用 Dockerfile
  - [ ] フロントエンド用 Dockerfile
  - [ ] 開発用 Docker Compose
  - [ ] データベースコンテナ設定

### 本番デプロイ

- [ ] **CI/CD パイプライン**

  - [ ] GitHub Actions セットアップ
  - [ ] 自動テスト
  - [ ] ビルドとデプロイ自動化
  - [ ] 環境固有設定

- [ ] **本番インフラ**

  - [ ] SSL 証明書設定
  - [ ] ドメイン設定
  - [ ] データベースマイグレーション戦略
  - [ ] バックアップと復旧計画

- [ ] **監視とメンテナンス**
  - [ ] アプリケーション監視
  - [ ] データベース監視
  - [ ] ログ集約
  - [ ] アラートシステム

---

## 📝 ドキュメント

- [ ] **API ドキュメント**

  - [ ] 完全な OpenAPI 仕様書
  - [ ] API 使用例
  - [ ] 認証ドキュメント

- [ ] **ユーザードキュメント**

  - [ ] ユーザーガイド
  - [ ] FAQ セクション
  - [ ] トラブルシューティングガイド

- [ ] **開発者ドキュメント**
  - [ ] セットアップ手順
  - [ ] アーキテクチャ概要
  - [ ] コントリビューションガイドライン
  - [ ] コードスタイルガイド

---

## 🎯 次のスプリント目標

### 週 1-2: スレッド & コメントシステム完成

1. **スレッドリストの型エラー修正** ⚠️ **最優先**
2. スレッド詳細ページの実装
3. コメント表示と作成の構築
4. スレッド作成/編集機能の API 統合

### 週 3-4: ユーザーエクスペリエンス改善

1. ユーザープロフィール機能の追加
2. 検索機能の実装
3. レスポンシブデザインの改善
4. エラーハンドリングの強化

### 週 5-6: 高度な機能とパフォーマンス

1. 投票/評価システムの実装
2. リアルタイム機能の追加
3. パフォーマンス最適化
4. テストカバレッジの向上

---

## 📊 実装進捗

- **認証システム**: ✅ **完了** (100%)
- **基本ナビゲーション**: ✅ **完了** (100%)
- **スレッドリスト**: 🚧 **進行中** (70% - 型定義修正が必要)
- **スレッド詳細**: ⚪ **未開始** (0%)
- **コメントシステム**: ⚪ **未開始** (0%)
- **ユーザープロフィール**: ⚪ **未開始** (0%)

---

_最終更新: 2024 年 12 月 - 認証システム完成、スレッドリスト改善進行中_
