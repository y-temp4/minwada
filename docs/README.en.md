# ğŸ—£ï¸ Minna no Wadai (Everyone's Topic)

[![Rust](https://img.shields.io/badge/rust-1.87.0-orange.svg?logo=rust)](https://www.rust-lang.org)
[![Next.js](https://img.shields.io/badge/next.js-15+-black.svg?logo=next.js)](https://nextjs.org/)

[æ—¥æœ¬èªã® README](/README.md)

> A Reddit-style thread and comment system sample implementation. Post topics freely and enjoy communication through comments.
>
> (Last updated: June 7, 2025)

> [!WARNING]
> Please note that most of the code in this project, including this README, was generated by AI and may not always be correct.

## âœ¨ Features

- ğŸ‘¤ User authentication (JWT)
- ğŸ“ Thread posting and viewing
- ğŸ’¬ Tree-structured comment system
- ğŸ‘¨â€ğŸ’» User profile page (displaying posted threads and comments)
- ğŸ“± Responsive design

## ğŸ› ï¸ Technology Stack

### Backend

- **Language**: [Rust](https://www.rust-lang.org/) ğŸ¦€
- **Framework**: [axum](https://github.com/tokio-rs/axum) âš¡
- **Database**: [PostgreSQL](https://www.postgresql.org/) ğŸ˜
- **ORM**: [sqlx](https://github.com/launchbadge/sqlx) ğŸ“Š
- **Authentication**: JWT + OAuth2 (Google, planned) ğŸ”
- **API Specification**: [OpenAPI](https://www.openapis.org/) ([utoipa](https://github.com/juhaku/utoipa)) ğŸ“š

### Frontend

- **Framework**: [Next.js](https://nextjs.org/) 15+ (App Router) âš›ï¸
- **UI**: [shadcn/ui](https://ui.shadcn.com/) + [Tailwind CSS](https://tailwindcss.com/) ğŸ¨
- **API Client**: [TanStack Query](https://tanstack.com/query) + [Orval](https://orval.dev/) ğŸ”„
- **Forms**: [React Hook Form](https://react-hook-form.com/) + [Zod](https://zod.dev/) ğŸ“‹

## ğŸ“‚ Project Structure

```
minwada/
â”œâ”€â”€ backend/                 # Rust (axum) backend API
â”‚   â”œâ”€â”€ src/                 # Source code
â”‚   â”‚   â”œâ”€â”€ main.rs          # Entry point
â”‚   â”‚   â”œâ”€â”€ config.rs        # Application configuration
â”‚   â”‚   â”œâ”€â”€ models/          # Data models
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ threads.rs
â”‚   â”‚   â”‚   â””â”€â”€ users.rs
â”‚   â”‚   â””â”€â”€ handlers/        # API handlers
â”‚   â”‚       â”œâ”€â”€ auth.rs
â”‚   â”‚       â”œâ”€â”€ threads.rs
â”‚   â”‚       â””â”€â”€ comments.rs
â”‚   â”œâ”€â”€ migrations/          # DB migrations
â”‚   â”œâ”€â”€ database/            # DB configuration
â”‚   â””â”€â”€ Cargo.toml           # Dependencies
â”œâ”€â”€ frontend/                # Next.js frontend
â”‚   â”œâ”€â”€ src/                 # Source code
â”‚   â”‚   â”œâ”€â”€ app/             # App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx     # Homepage
â”‚   â”‚   â”œâ”€â”€ components/      # UI components
â”‚   â”‚   â””â”€â”€ lib/             # Utilities
â”‚   â”œâ”€â”€ generated/           # Auto-generated API code
â”‚   â””â”€â”€ package.json         # Dependencies
â”œâ”€â”€ justfile                 # Task runner
â””â”€â”€ README.md                # This file
```

## ğŸš€ Development Environment Setup

### Required Tools

- [asdf](https://asdf-vm.com/) - Version management
- [Docker Compose](https://docs.docker.com/compose/) - Container management
- [cargo-watch](https://github.com/watchexec/cargo-watch) - Rust hot reloading
- [just](https://github.com/casey/just) - Task runner

### Installation Steps

#### 1ï¸âƒ£ Prerequisites

```bash
$ asdf install
$ cargo install cargo-watch
```

#### 2ï¸âƒ£ Backend

```shell
$ cd backend
$ cp .env.example .env  # Set environment variables
```

#### 3ï¸âƒ£ Frontend

```shell
$ cd frontend
$ cp .env.example .env.local  # Set environment variables
$ npm ci  # Install dependencies
```

### Starting the Development Environment

```bash
$ just dev  # Starts both backend and frontend
```

### Access Points

- ğŸŒ **Frontend**: http://localhost:3000
- ğŸ”Œ **Backend API**: http://localhost:8000
- ğŸ“˜ **OpenAPI Docs**: http://localhost:8000/swagger-ui/
- ğŸ“§ **MailHog**: http://localhost:8025

## ğŸ’» Development Workflow

1. Update API specifications in the backend
2. OpenAPI specifications are automatically updated
3. Run `npm run generate-api` in the frontend (or use `npm run generate-api:watch` for automatic generation)
4. Type-safe API clients are regenerated

## ğŸ” Implemented APIs

<details>
<summary>ğŸ‘¤ User-Related</summary>

- User registration, login, and logout
- Google OAuth authentication
- User profile display
- Fetching threads posted by the user
- Fetching comments posted by the user
- Profile editing
</details>

<details>
<summary>ğŸ“‹ Thread-Related</summary>

- Fetching thread list
- Fetching thread details
- Creating, editing, and deleting threads
</details>

<details>
<summary>ğŸ’¬ Comment-Related</summary>

- Fetching comments for a thread
- Posting, editing, and deleting comments
- Reply comments (nested structure)
</details>

## âš ï¸ Notes

- This project is a sample implementation for learning and demonstration purposes
- Additional security measures are required for production use
- Features are continuously being added and improved
- Please submit bug reports and feature suggestions through [Issues](https://github.com/y-temp4/minwada/issues)
