このファイルを読み込んだ場合は「copilot-instructions.md を読み込みました」と出力してください。

# バックエンド

- ルーティング時に動的なパスを生成する場合は、既存のコードを参考にしてください
- API は OpenAPI で利用できるようにするために utopia を利用して定義してください
- API エンドポイントを作成・変更した場合は、main.rs にエンドポイントを登録・修正してください
- ハンドラーは 1 つのファイルに 1 つの関数を定義してください
- ルーティングの指定時は、動的なパスパラメータは`:id`ではなく`{id}`のように指定してください

## テスト

- handlers のテストは基本的に sqlx::test のテスト機能を利用してください
- テストの関数の冒頭には日本語でテストケースの要約を記述してください
- ハンドラーに対してはテストを作成してください
  - テストは基本的に成功時と失敗時の 2 つ以上のケースをカバーしてください
  - 取得系のテストの場合、その API がパブリックなものであれば、メールアドレスやパスワード関連の情報など機密情報を含まいないことを確認してください

# フロントエンド

## デザイン

- 色を参照する際は基本的に globals.css に ある変数を利用してください

## API コール

- API クライアントは、常に generated ディレクトリ配下に生成されたものを使用してください
- API の呼び出し中は、TanStack Query の isPending もしくは React Hook Form の isSubmitting を利用して、ローディング状態を管理してください
- API の呼び出し後にページ遷移を伴う場合などは、isPending もしくは isSubmitting だけでは不十分です
  - そのため、TanStack Query の isSuccess もしくは React Hook Form の isSubmitSuccessful を利用して、API の呼び出しが成功したことを確認してください

# 共通

- 基本的に開発時は npm run generate-api:watch を実行しているため、バックエンドの変更後にフロントエンドのコードを生成する必要はありません
  - 生成がうまくいっていない場合は、npm run generate-api を実行してください
